<!DOCTYPE html>
<html>
  <head>
    <title>Material Desktop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto" type="text/css">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/material-components-web.css" type="text/css">
    <link rel="stylesheet" href="css/styles.css" type="text/css">
    <link rel="stylesheet" href="css/media-bar.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css" type="text/css">
    
    <!-- MCW Scripts -->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.js"></script>
    
    <!-- MessagePassing Scripts -->
    <script src="js/wsArtist.js"></script>
    <script src="js/wsCover.js"></script>
    <script src="js/wsControls.js"></script>
    <script src="js/wsPlayer.js"></script>
    <script src="js/wsPlayPause.js"></script>
    <script src="js/wsProgress.js"></script>
    <script src="js/wsTrack.js"></script>
    <script src="js/wsDiscord.js"></script>
    
    <!--Details polyfill-->
    <script src="js/details-polyfill.js"></script>
    
    <!-- Variables -->
    <style>
      :root {
        --taskbar-height: 40px;
        /* 40 for normal taskbar, 30 for small icons, 0 for disabled/autohide */
        
        --font: Roboto, sans-serif;
        
        --bg: url("../img/wallpapers/january.jpg");
      }
    </style>
  </head>
  <body class="mdc-typography body">
    <header class="mdc-toolbar mdc-toolbar--fixed">
      <div class="mdc-toolbar__row">
        <section class="mdc-toolbar__section mdc-toolbar__section--align-start">
          <span>
            <button class="mdc-toolbar__menu-icon material-icons menu-icon">menu</button>
          </span>
          <span class="mdc-toolbar__title">Top Bar</span>
        </section>
        <section class="mdc-toolbar__section mdc-toolbar__section--align-end">
          <div class="mdc-form-field mdc-toolbar__icon">
            <div class="mdc-switch">
              <input type="checkbox" id="toggle-dark" class="mdc-switch__native-control" />
              <div class="mdc-switch__background">
                <div class="mdc-switch__knob"></div>
              </div>
            </div>
            <label for="toggle-dark" class="mdc-switch-label" style="text-overflow: ellipsis; white-space: nowrap;">Dark Theme</label>
          </div>
          <button class="mdc-toolbar__icon material-icons mdc-menu-anchor" id="dropdown-button">more_vert</button>
          <div class="mdc-simple-menu mdc-simple-menu--open-from-top-right" id="dropdown" tabindex="-1">
            <ul class="mdc-simple-menu__items mdc-list" role="menu" aria-hidden="true">
              <li class="mdc-list-item" role="menuitem" tabindex="-1">WebSockets Display
                <div class="mdc-form-field mdc-list-item__end-detail list-switch">
                  <div class="mdc-switch">
                    <input type="checkbox" id="websockets-checkbox" class="mdc-switch__native-control list-switch-native" />
                    <div class="mdc-switch__background">
                      <div class="mdc-switch__knob"></div>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </section>
      </div>
    </header>
    <aside class="mdc-drawer mdc-drawer--temporary">
      <nav class="mdc-drawer__drawer">
        <div class="mdc-drawer__toolbar-spacer">
        </div>
        <nav class="mdc-drawer__content mdc-list-group">
          <div class="mdc-drawer__subtitle">
            Player
          </div>
          <div class="mdc-list">
            <details class="mdc-expansion" onclick="expandUpdate()">
              <summary class="mdc-expansion__summary mdc-list-item">
                <div class="mdc-expansion__header">
                  <i class="material-icons mdc-list-item__graphic" aria-hidden="true">library_music</i>
                  Player
                  <i class="material-icons mdc-list-item__meta mdc-expansion__icon" aria-hidden="true">expand_more</i>
                </div>
              </summary>
              <div class="mdc-expansion__content">
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="aimp" onclick="sendMessagePlayer('AIMP')">AIMP</button> 
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="foobar" onclick="sendMessagePlayer('Foobar')">Foobar</button>
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="gpmdp" onclick="sendMessagePlayer('GPMDP')">GPMDP</button>
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="itunes" onclick="sendMessagePlayer('iTunes')">iTunes</button> 
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="mediamonkey" onclick="sendMessagePlayer('MediaMonkey')">MediaMonkey</button> 
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="musicbee" onclick="sendMessagePlayer('MusicBee')">MusicBee</button>   
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="spotify" onclick="sendMessagePlayer('Spotify')">Spotify</button>
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="web" onclick="sendMessagePlayer('Web')">Web</button> 
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="winamp" onclick="sendMessagePlayer('WinAmp')">WinAmp</button>
                <button class="mdc-list-item" data-mdc-tabindex-handled="true" tabindex="-1" id="wmp" onclick="sendMessagePlayer('WMP')">WMP</button>
              </div>
            </details>
            <div class="mdc-list-item">
              <i class="material-icons mdc-list-item__graphic" aria-hidden="true">account_circle</i>
              DiscordRP
              <div class="mdc-form-field mdc-list-item__meta list-switch">
                <div class="mdc-switch">
                  <input type="checkbox" id="discordrp" class="mdc-switch__native-control list-switch-native" />
                  <div class="mdc-switch__background">
                    <div class="mdc-switch__knob"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nav>
      </nav>
    </aside>
    <div class="content mdc-toolbar-fixed-adjust">
      <div class="mdc-layout-grid">
        <div class="mdc-layout-grid__inner">
          <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 mdc-card mdc-theme--background" id="websockets">
            <header class="mdc-data-table__header">
              <section class="mdc-data-table__header__section mdc-data-table__header__section--align-start">
                <span class="mdc-data-table__header__title">WebSockets</span>
              </section>
              <section class="mdc-data-table__header__section mdc-data-table__header__section--align-end">
                <button class="material-icons mdc-data-table__header__icon" onclick="location.reload(true)">refresh</button>
              </section>
            </header>
            <table class="mdc-data-table mdc-data-table--full-width mdc-data-table--card">
              <thead>
                <th class="mdc-data-table__cell--non-numeric">WebSocket</th>
                <th class="mdc-data-table__cell--non-numeric">Open?</th>
                <th class="mdc-data-table__cell--non-numeric">Player</th>
                <th class="mdc-data-table__cell--non-numeric">PlayPause</th>
                <th>Progress</th>
                <th class="mdc-data-table__cell--non-numeric">Track</th>
                <th class="mdc-data-table__cell--non-numeric">Artist</th>
                <th class="mdc-data-table__cell--non-numeric">Cover</th>
                <th class="mdc-data-table__cell--non-numeric">Controls</th>
                <th>Discord</th>
              </thead>
              <tbody>
                <tr>
                  <td class="mdc-data-table__cell--non-numeric">Condensed</td>
                  <td class="mdc-data-table__cell--non-numeric" id="condensed-status">No</td>
                  <td class="mdc-data-table__cell--non-numeric" id="player-info">N/A</td>
                  <td class="mdc-data-table__cell--non-numeric" id="playpause-info">N/A</td>
                  <td id="progress-info">N/A</td>
                  <td class="mdc-data-table__cell--non-numeric" id="track-info">N/A</td>
                  <td class="mdc-data-table__cell--non-numeric" id="artist-info">N/A</td>
                  <td class="mdc-data-table__cell--non-numeric" id="cover-info">N/A</td>
                  <td class="mdc-data-table__cell--non-numeric" id="controls-info">N/A</td>
                  <td id="discord-info">N/A</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="media-bar">
        <button class="mdc-fab mdc-fab--mini media-bar__fab" aria-label="Toggle media bar visibility" data-mdc-auto-init="MDCRipple" >
          <input type="checkbox" id="show-hide-media" class="mdc-checkbox__native-control">
          <span class="mdc-fab__icon material-icons">
            expand_more
          </span>
        </button>
        <div class="media-bar__bar mdc-theme--background">
          <div role="progressbar" class="mdc-linear-progress">
            <div class="mdc-linear-progress__buffer"></div>
            <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar" style="transform: scaleX(0.5);">
              <span class="mdc-linear-progress__bar-inner"></span>
            </div>
            <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
              <span class="mdc-linear-progress__bar-inner"></span>
            </div>
          </div>
          <div class="media-bar__row">
            <div class="media-bar__section media-bar__section--align-start">
              <span class="media-bar__album-icon material-icons">album</span>
              <div class="media-bar__track-info">
                <ul class="mdc-list mdc-list--two-line mdc-list--non-interactive">
                  <li class="mdc-list-item">
                    <span class="mdc-list-item__text">
                      <span class="mdc-list-item__primary-text" id="track"></span>
                      <span class="mdc-list-item__secondary-text" id="artist"></span>
                    </span>
                  </li>
                </ul>
              </div>
            </div>
            <div class="media-bar__section media-bar__section--shrink-to-fit">
              <button class="material-icons media-bar__icon" id="prev" onclick="sendMessageControl('Previous')">skip_previous</button>
              <button class="material-icons media-bar__icon media-bar--main-button" id="playpause" onclick="sendMessageControl('PlayPause')">play_arrow</button>
              <button class="material-icons media-bar__icon" id="next" onclick="sendMessageControl('Next')">skip_next</button>
            </div>
            <div class="media-bar__section media-bar__section--align-end">
            
            </div>
          </div>
        </div>
      </div>
      <div class="taskbar mdc-elevation--z4"></div> 
    </div>
    <script>
      mdc.autoInit()
      
      var mediaBar = document.querySelector('.media-bar');
      var fabCheckbox = document.getElementById('show-hide-media');
      fabCheckbox.addEventListener('change', function () {
        mediaBar.classList[fabCheckbox.checked ? 'add' : 'remove']('media-bar--hidden');
      });
      
      var wsDisplay = document.querySelector('#websockets');
      var wsDisplayCheckbox = document.getElementById('websockets-checkbox');
      wsDisplayCheckbox.addEventListener('change', function () {
        wsDisplay.classList[wsDisplayCheckbox.checked ? 'remove' : 'add']('hidden');
      });
      
      var body = document.querySelector('body');
      var dark = document.getElementById('toggle-dark');
      dark.addEventListener('change', function () {
        body.classList[dark.checked ? 'add' : 'remove']('mdc-theme--dark');
      });
      
      var toolbar = mdc.toolbar.MDCToolbar.attachTo(document.querySelector('.mdc-toolbar'));
      toolbar.fixedAdjustElement = document.querySelector('.mdc-toolbar-fixed-adjust');
      
      var drawerEl = document.querySelector('.mdc-drawer');
      var MDCTemporaryDrawer = mdc.drawer.MDCTemporaryDrawer;
      var drawer = new MDCTemporaryDrawer(drawerEl);
      document.querySelector('.menu-icon').addEventListener('click', function() {
        drawer.open = true;
      });
      drawerEl.addEventListener('MDCTemporaryDrawer:open', function() {
        console.log('Received MDCTemporaryDrawer:open');
      });
      drawerEl.addEventListener('MDCTemporaryDrawer:close', function() {
        console.log('Received MDCTemporaryDrawer:close');
      });
      
      let menu = new mdc.menu.MDCSimpleMenu(document.querySelector('#dropdown'));
      document.querySelector('#dropdown-button').addEventListener('click', () => menu.open = !menu.open);
      
      var expandHeader = document.querySelector('.mdc-expansion__header');
      function expandUpdate() {
        let expandOpen = document.querySelector('.mdc-expansion').hasAttribute("open");
        expandHeader.classList[(expandOpen) ? 'remove' : 'add']('mdc-list-item--selected');
      }
      
      var discordCheckbox = document.getElementById("discordrp")
      discordCheckbox.addEventListener('change', function () {
        if (discordCheckbox.checked) {
          sendMessageDiscord('1');
        } else {
          sendMessageDiscord('0');
        }
      });
    </script>
  </body>
</html>